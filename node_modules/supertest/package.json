{
  "_from": "supertest",
  "_id": "supertest@3.0.0",
  "_inBundle": false,
  "_integrity": "sha1-jUu2j9GDDuBwM7HFpamkAhyWUpY=",
  "_location": "/supertest",
  "_phantomChildren": {},
  "_requested": {
    "escapedName": "supertest",
    "fetchSpec": "latest",
    "name": "supertest",
    "raw": "supertest",
    "rawSpec": "",
    "registry": true,
    "saveSpec": null,
    "type": "tag"
  },
  "_requiredBy": [
    "#USER",
    "/"
  ],
  "_resolved": "https://registry.npmjs.org/supertest/-/supertest-3.0.0.tgz",
  "_shasum": "8d4bb68fd1830ee07033b1c5a5a9a4021c965296",
  "_shrinkwrap": null,
  "_spec": "supertest",
  "_where": "/Users/hoangnguyen/Coding/react/calorieCounter",
  "author": {
    "name": "TJ Holowaychuk"
  },
  "bugs": {
    "url": "https://github.com/visionmedia/supertest/issues"
  },
  "bundleDependencies": false,
  "dependencies": {
    "methods": "~1.1.2",
    "superagent": "^3.0.0"
  },
  "deprecated": false,
  "description": "SuperAgent driven library for testing HTTP servers",
  "devDependencies": {
    "body-parser": "~1.16.0",
    "cookie-parser": "~1.4.1",
    "eslint": "^3.14.1",
    "eslint-config-airbnb": "^12.0.0",
    "eslint-plugin-import": "1.16.0",
    "eslint-plugin-jsx-a11y": "2.2.3",
    "eslint-plugin-react": "6.4.1",
    "express": "~4.14.0",
    "mocha": "~3.2.0",
    "should": "~11.2.0"
  },
  "engines": {
    "node": ">=4.0.0"
  },
  "homepage": "https://github.com/visionmedia/supertest#readme",
  "keywords": [
    "superagent",
    "request",
    "tdd",
    "bdd",
    "http",
    "test",
    "testing"
  ],
  "license": "MIT",
  "main": "index.js",
  "name": "supertest",
  "optionalDependencies": {},
  "readme": "# SuperTest [![Build Status](https://travis-ci.org/visionmedia/supertest.svg?branch=master)](https://travis-ci.org/visionmedia/supertest) [![npm version](https://badge.fury.io/js/supertest.svg)](https://www.npmjs.com/package/supertest) [![Dependency Status](https://david-dm.org/visionmedia/supertest/status.svg)](https://david-dm.org/visionmedia/supertest)\r\n\r\n  HTTP assertions made easy via [superagent](http://github.com/visionmedia/superagent).\r\n\r\n## About\r\n\r\n  The motivation with this module is to provide a high-level abstraction for testing\r\n  HTTP, while still allowing you to drop down to the [lower-level API](https://visionmedia.github.io/superagent/) provided by superagent.\r\n\r\n## Getting Started\r\n\r\n  Install SuperTest as an npm module and save it to your package.json file as a development dependency:\r\n  ```\r\nnpm install supertest --save-dev\r\n  ```\r\n\r\n  Once installed it can now be referenced by simply calling ```require('supertest');```\r\n\r\n## Example\r\n\r\n  You may pass an `http.Server`, or a `Function` to `request()` - if the server is not\r\n  already listening for connections then it is bound to an ephemeral port for you so\r\n  there is no need to keep track of ports.\r\n\r\n  SuperTest works with any test framework, here is an example without using any\r\n  test framework at all:\r\n\r\n```js\r\nconst request = require('supertest');\r\nconst express = require('express');\r\n\r\nconst app = express();\r\n\r\napp.get('/user', function(req, res) {\r\n  res.status(200).json({ name: 'tobi' });\r\n});\r\n\r\nrequest(app)\r\n  .get('/user')\r\n  .expect('Content-Type', /json/)\r\n  .expect('Content-Length', '15')\r\n  .expect(200)\r\n  .end(function(err, res) {\r\n    if (err) throw err;\r\n  });\r\n```\r\n\r\n  Here's an example with mocha, note how you can pass `done` straight to any of the `.expect()` calls:\r\n\r\n```js\r\ndescribe('GET /user', function() {\r\n  it('respond with json', function(done) {\r\n    request(app)\r\n      .get('/user')\r\n      .set('Accept', 'application/json')\r\n      .expect('Content-Type', /json/)\r\n      .expect(200, done);\r\n  });\r\n});\r\n```\r\n\r\nOne thing to note with the above statement is that superagent now sends any HTTP\r\nerror (anything other than a 2XX response code) to the callback as the first argument if\r\nyou do not add a status code expect (i.e. `.expect(302)`).\r\n\r\n  If you are using the `.end()` method `.expect()` assertions that fail will\r\n  not throw - they will return the assertion as an error to the `.end()` callback. In\r\n  order to fail the test case, you will need to rethrow or pass `err` to `done()`, as follows:\r\n\r\n```js\r\ndescribe('GET /users', function() {\r\n  it('respond with json', function(done) {\r\n    request(app)\r\n      .get('/users')\r\n      .set('Accept', 'application/json')\r\n      .expect(200)\r\n      .end(function(err, res) {\r\n        if (err) return done(err);\r\n        done();\r\n      });\r\n  });\r\n});\r\n```\r\n\r\nYou can also use promises\r\n\r\n```js\r\ndescribe('GET /users', function() {\r\n  it('respond with json', function() {\r\n    return request(app)\r\n      .get('/users')\r\n      .set('Accept', 'application/json')\r\n      .expect(200)\r\n      .then(response => {\r\n          assert(response.body.email, 'foo@bar.com')\r\n      })\r\n  });\r\n});\r\n```\r\n\r\n  Expectations are run in the order of definition. This characteristic can be used\r\n  to modify the response body or headers before executing an assertion.\r\n\r\n```js\r\ndescribe('GET /user', function() {\r\n  it('user.name should be an case-insensitive match for \"tobi\"', function(done) {\r\n    request(app)\r\n      .get('/user')\r\n      .set('Accept', 'application/json')\r\n      .expect(function(res) {\r\n        res.body.id = 'some fixed id';\r\n        res.body.name = res.body.name.toUpperCase();\r\n      })\r\n      .expect(200, {\r\n        id: 'some fixed id',\r\n        name: 'TOBI'\r\n      }, done);\r\n  });\r\n});\r\n```\r\n\r\nAnything you can do with superagent, you can do with supertest - for example multipart file uploads!\r\n\r\n```js\r\nrequest(app)\r\n.post('/')\r\n.field('name', 'my awesome avatar')\r\n.attach('avatar', 'test/fixtures/homeboy.jpg')\r\n...\r\n```\r\n\r\n  Passing the app or url each time is not necessary, if you're testing\r\n  the same host you may simply re-assign the request variable with the\r\n  initialization app or url, a new `Test` is created per `request.VERB()` call.\r\n\r\n```js\r\nrequest = request('http://localhost:5555');\r\n\r\nrequest.get('/').expect(200, function(err){\r\n  console.log(err);\r\n});\r\n\r\nrequest.get('/').expect('heya', function(err){\r\n  console.log(err);\r\n});\r\n```\r\n  Here's an example with mocha that shows how to persist a request and its cookies:\r\n\r\n```js\r\nconst request = require('supertest');\r\nconst should = require('should');\r\nconst express = require('express');\r\nconst cookieParser = require('cookie-parser');\r\n\r\ndescribe('request.agent(app)', function() {\r\n  const app = express();\r\n  app.use(cookieParser());\r\n\r\n  app.get('/', function(req, res) {\r\n    res.cookie('cookie', 'hey');\r\n    res.send();\r\n  });\r\n\r\n  app.get('/return', function(req, res) {\r\n    if (req.cookies.cookie) res.send(req.cookies.cookie);\r\n    else res.send(':(')\r\n  });\r\n\r\n  const agent = request.agent(app);\r\n\r\n  it('should save cookies', function(done) {\r\n    agent\r\n    .get('/')\r\n    .expect('set-cookie', 'cookie=hey; Path=/', done);\r\n  });\r\n\r\n  it('should send cookies', function(done) {\r\n    agent\r\n    .get('/return')\r\n    .expect('hey', done);\r\n  });\r\n})\r\n```\r\n  There is another example that is introduced by the file [agency.js](https://github.com/visionmedia/superagent/blob/master/test/node/agency.js)\r\n\r\n## API\r\n\r\n  You may use any [superagent](http://github.com/visionmedia/superagent) methods,\r\n  including `.write()`, `.pipe()` etc and perform assertions in the `.end()` callback\r\n  for lower-level needs.\r\n\r\n### .expect(status[, fn])\r\n\r\n  Assert response `status` code.\r\n\r\n### .expect(status, body[, fn])\r\n\r\n  Assert response `status` code and `body`.\r\n\r\n### .expect(body[, fn])\r\n\r\n  Assert response `body` text with a string, regular expression, or\r\n  parsed body object.\r\n\r\n### .expect(field, value[, fn])\r\n\r\n  Assert header `field` `value` with a string or regular expression.\r\n\r\n### .expect(function(res) {})\r\n\r\n  Pass a custom assertion function. It'll be given the response object to check. If the check fails, throw an error.\r\n\r\n  ```js\r\n  request(app)\r\n    .get('/')\r\n    .expect(hasPreviousAndNextKeys)\r\n    .end(done);\r\n\r\n  function hasPreviousAndNextKeys(res) {\r\n    if (!('next' in res.body)) throw new Error(\"missing next key\");\r\n    if (!('prev' in res.body)) throw new Error(\"missing prev key\");\r\n  }\r\n  ```\r\n\r\n### .end(fn)\r\n\r\n  Perform the request and invoke `fn(err, res)`.\r\n\r\n## Notes\r\n\r\n  Inspired by [api-easy](https://github.com/flatiron/api-easy) minus vows coupling.\r\n\r\n## License\r\n\r\n  MIT\r\n",
  "readmeFilename": "Readme.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/visionmedia/supertest.git"
  },
  "scripts": {
    "pretest": "npm install",
    "test": "eslint lib/**/*.js test/**/*.js && mocha --require should --reporter spec --check-leaks"
  },
  "version": "3.0.0"
}
